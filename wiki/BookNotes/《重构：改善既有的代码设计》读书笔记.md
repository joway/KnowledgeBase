《重构：改善既有的代码设计》读书笔记
---

#### 重构步骤:

1. 测试环境搭建: 
	
	进行重构前, 为现有项目添加一组可靠的测试环境. 并在每小幅度修改后, 都运行测试以检验是否正确, 确保不会在大改动后出现错误从而无法追溯错误源. 测试代码最好可以自我检验正确性, 就省去人工比对了. 

2. 函数封装: 

	找出代码的逻辑泥团(特别复杂特别多的地方), 抽象成函数. (目前IDE支持代码自动重构成函数了)
	- 任何不会被修改的变量可作为参数传入
	- 会修改的变量若为单个可作为返回值
	
3. 命名修改: 

	接下来可以对拆分后的局部模块进行变量名等细节的修改, 由于其脱离了大环境, 被放入了我们可控的环境下, 所以这个时候再进行变量名的修改更加安全. 

4. 移动方法: 

	观察是否出现 A类的方法并没有用到A类信息却调用了B类信息, 则有可能这个方法是要被定义在B类的 . 
	- 移动方法要注意是否需要改变参数
	- 移动方法前, 要观察该方法牵涉到的引用 . 
	
5. 去除临时变量:

	去掉在重构过程进行中, 作用消失显得多余的变量, 一般为那些赋值后变不再改变, 仅仅充当了借记工具的变量.
	
	
	
#### 重构原则:

1. 整洁大于性能(重构阶段)

	- 在重构时, 不需要过于考虑性能, 这是在重构完成后, 性能优化阶段才需要考虑的. 在重构时, 性能优劣与否是很难考虑清楚的 , 有可能暂时性性能低了, 但是在后期扩展时 , 由于代码的复用性高, 性能又会比重构前高很多了.
	
2. 将倚赖于容易变化的对象的方法放在容易变化的那个类里, 控制其对其变化对其它类造成的影响. 
























